{% extends "core_base.html" %} {% block content %}
<div class="container login-form">
  <form
    action="{% url 'password-recover-new' %}?token={{token}}"
    method="POST"
    id="password-form"
  >
    {% csrf_token %}
    <div class="form-floating">
      <input
        autocomplete="password"
        type="password"
        name="password"
        class="form-control"
        id="password"
      />
      <label for="password">Senha</label>
    </div>
    <div class="form-floating">
      <input
        autocomplete="password"
        type="password"
        name="password2"
        class="form-control"
        id="password2"
      />
      <label for="password2">Confirmação</label>
    </div>
    <button
      class="btn btn-light w-100 py-2 mt-2"
      type="submit"
      id="alter-password-button"
    >
      Alterar
    </button>
  </form>
</div>
<script>
  passwordInput = document.getElementById("password");
  passwordInput2 = document.getElementById("password2");
  alterPasswordButton = document.getElementById("alter-password-button");
  passwordForm = document.getElementById("password-form");

  alterPasswordButton.addEventListener("click", (e) => {
    e.preventDefault();
    password = passwordInput.value;
    password2 = passwordInput2.value;
    if (password === password2) {
      passwordForm.submit();
    } else {
      passwordInput2.classList.add("input-error");
    }
  });
</script>
{% endblock content %}
